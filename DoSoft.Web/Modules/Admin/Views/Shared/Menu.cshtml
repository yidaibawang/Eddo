@model List<DoSoft.Admin.Models.TreeNode>
@using Eddo.Extensions;
@{
    //load sitemap
    var siteMap = Model;

}

@helper RenderMenuItem(DoSoft.Admin.Models.TreeNode item)
{
    string url = item.Url;

    if (!item.Url.IsNullOrEmpty())
    {
        url =Url.Content(item.Url);
    }
<li class="treeview">

    <a href="@url" class="menu-item-link">
        @if (!String.IsNullOrEmpty(item.IconCls))
        {
            <text>
                <i class="fa @Url.Content(item.IconCls)"></i>
            </text>
        }
        <span>@item.Name</span>
        <span class="pull-right-container">
            @if (@item.HasChildren)
            {
                <i class="fa fa-angle-left pull-right"></i>
            }

        </span>
    </a>
    @if (@item.HasChildren)
    {
        <ul class="treeview-menu">
            @foreach (var childItem in item.Items.ToList())
            {
                @RenderMenuItem(childItem)
            }
        </ul>
    }
</li>

}

<ul class="sidebar-menu" data-widget="tree">
    @{
        //standard (default) items
        var rootNode = siteMap;

    }
    @foreach (var item in rootNode[0].Items)
    {
        @RenderMenuItem(item)
    }
</ul>